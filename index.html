<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="El Mostapha Jaaidi - Senior Agro-Tech Engineer & Data Systems Architect. Especialista en IoT, Python y Machine Learning para agricultura de precisi√≥n.">
    <meta name="keywords" content="AgroTech, IoT, Python, Data Science, MQTT, TimescaleDB, Agricultura de Precisi√≥n, Data Architect">
    <meta name="author" content="El Mostapha Jaaidi">
    <meta name="theme-color" content="#05080f">

    <meta property="og:site_name" content="Agro-Tech Engineering Portfolio">
    <meta property="og:title" content="El Mostapha Jaaidi | Senior Agro-Tech Engineer">
    <meta property="og:description" content="Dise√±o sistemas IoT y plataformas de datos que anticipan plagas y optimizan cultivos.">
    <meta property="og:image" content="img/foto.png">
    <meta property="og:type" content="profile">
    <meta property="og:locale" content="es_ES">
    
    <title>El Mostapha Jaaidi | Senior Agro-Tech Engineer</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "El Mostapha Jaaidi",
      "jobTitle": "Senior Agro-Tech Engineer & Data Systems Architect",
      "knowsAbout": ["IoT", "Python", "Agro-Data Intelligence", "MQTT", "Docker"],
      "url": "https://github.com/jaaidi0",
      "image": "img/foto.png",
      "sameAs": [
        "https://linkedin.com/in/el-jaidi",
        "https://github.com/jaaidi0"
      ],
      "alumniOf": {
        "@type": "CollegeOrUniversity",
        "name": "University of Seville"
      },
      "description": "Ingeniero especializado en la intersecci√≥n de agronom√≠a y tecnolog√≠a de datos."
    }
    </script>

    <style>
        :root {
            /* PALETA SENIOR PRO (Contraste WCAG AA+) */
            --bg: #05080f;
            --surface: #0e121b;
            --surface-hover: #161b26;
            --primary: #00ff9d;
            --primary-glow: rgba(0, 255, 157, 0.15);
            --secondary: #38bdf8;
            --accent: #a855f7; 
            --text: #f8fafc;
            --text-muted: #94a3b8;
            --border: rgba(255,255,255,0.08);
            
            /* Categor√≠as Tech Tags (Consistencia Crom√°tica) */
            --tag-infra-bg: rgba(56, 189, 248, 0.1); --tag-infra-text: #38bdf8;
            --tag-data-bg: rgba(0, 255, 157, 0.1); --tag-data-text: #00ff9d;
            --tag-backend-bg: rgba(251, 191, 36, 0.1); --tag-backend-text: #ffb020;
            --tag-iot-bg: rgba(168, 85, 247, 0.1); --tag-iot-text: #d8b4fe;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* NAVBAR (Con Sombra Scroll) */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 18px 5%;
            background: rgba(5, 8, 15, 0.92);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
            transition: box-shadow 0.3s ease, border-color 0.3s ease;
        }
        nav.scrolled {
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            border-bottom-color: rgba(255,255,255,0.02);
        }

        .brand { font-weight: 800; font-size: 1.1rem; letter-spacing: -0.5px; color: #fff; }
        .brand span { color: var(--primary); }
        .nav-items a { 
            color: var(--text-muted); text-decoration: none; margin-left: 30px; 
            font-size: 0.9rem; font-weight: 500; transition: color 0.2s;
        }
        .nav-items a:hover { color: var(--primary); }

        /* LANGUAGE SWITCHER */
        .lang-switch {
            background: rgba(255,255,255,0.05); border: 1px solid var(--border);
            padding: 4px; border-radius: 6px; display: flex; gap: 4px; margin-left: 20px;
        }
        .lang-btn {
            background: transparent; border: none; color: var(--text-muted);
            padding: 4px 8px; font-size: 0.75rem; font-weight: 700; cursor: pointer;
            border-radius: 4px; transition: 0.3s;
        }
        .lang-btn.active { background: var(--primary); color: #000; }
        .nav-right { display: flex; align-items: center; }

        /* HERO SECTION */
        .hero {
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
            padding: 120px 20px 80px; position: relative;
        }
        .container { max-width: 1150px; width: 100%; display: grid; grid-template-columns: 1.3fr 0.7fr; gap: 70px; align-items: center; }

        .hero-badge {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 6px 14px; border-radius: 20px;
            background: rgba(255, 255, 255, 0.05); color: var(--primary);
            font-size: 0.75rem; font-weight: 700; margin-bottom: 24px;
            border: 1px solid rgba(0, 255, 157, 0.2); letter-spacing: 0.5px; text-transform: uppercase;
        }
        .live-dot { width: 6px; height: 6px; background: var(--primary); border-radius: 50%; box-shadow: 0 0 8px var(--primary); animation: pulse 2s infinite; }

        h1 {
            font-size: clamp(3rem, 5.5vw, 4.5rem); line-height: 1.05; font-weight: 800; margin-bottom: 15px;
            letter-spacing: -1.5px; color: #fff;
        }
        
        .role-subtitle {
            font-size: 1.4rem; color: var(--text-muted); margin-bottom: 25px; font-weight: 500;
        }
        .role-subtitle span { color: var(--text); font-weight: 600; }

        .hero p {
            font-size: 1.15rem; color: var(--text-muted); max-width: 600px; margin-bottom: 35px;
            line-height: 1.6;
        }
        .hero p strong { color: var(--text); font-weight: 600; }

        /* STACK PILLS */
        .stack-row { display: flex; gap: 10px; margin-bottom: 40px; flex-wrap: wrap; }
        .stack-pill {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border);
            padding: 6px 12px; border-radius: 6px; font-size: 0.8rem; color: var(--text-muted);
            display: flex; align-items: center; gap: 8px; font-weight: 500;
        }
        .stack-icon { width: 6px; height: 6px; border-radius: 50%; background: var(--secondary); }
        .stack-icon.purple { background: var(--accent); }

        /* BOTONES */
        .btn-group { display: flex; gap: 16px; flex-wrap: wrap; }
        .btn {
            padding: 14px 34px; border-radius: 8px; font-weight: 600; text-decoration: none;
            transition: all 0.2s ease-out; display: inline-flex; align-items: center; gap: 10px;
            font-size: 0.95rem;
        }
        .btn-primary {
            background: var(--primary); color: #05080f;
            box-shadow: 0 0 25px rgba(0, 255, 157, 0.2);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 40px rgba(0, 255, 157, 0.4); }
        
        .btn-ghost {
            background: transparent; color: var(--text); border: 1px solid var(--border);
        }
        .btn-ghost:hover { border-color: var(--text); background: rgba(255,255,255,0.05); }

        /* FOTO PRO */
        .hero-img-wrapper { position: relative; max-width: 320px; margin: 0 auto; }
        .hero-img {
            width: 100%; border-radius: 20px;
            filter: grayscale(10%) contrast(1.05);
            border: 1px solid rgba(255,255,255,0.1);
            position: relative; z-index: 2;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .hero-img:hover { transform: scale(1.02); filter: grayscale(0%); }
        
        .glow-bg {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 90%; height: 90%; background: var(--primary); opacity: 0.12;
            filter: blur(100px); z-index: 1; pointer-events: none;
        }

        /* === CASE STUDIES === */
        .section { padding: 120px 20px; max-width: 1150px; margin: 0 auto; }
        .section-header { margin-bottom: 60px; }
        .section-title { font-size: 2.2rem; font-weight: 800; margin-bottom: 15px; color: #fff; }
        .section-subtitle { font-size: 1.1rem; color: var(--text-muted); max-width: 600px; }

        .project-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 20px; padding: 45px; margin-bottom: 50px;
            transition: transform 0.3s, border-color 0.3s;
            display: grid; grid-template-columns: 1.4fr 1fr; gap: 50px;
            position: relative; overflow: hidden;
        }
        .project-card:hover { border-color: rgba(0, 255, 157, 0.3); transform: translateY(-4px); background: var(--surface-hover); }

        .cs-header { margin-bottom: 25px; }
        .cs-title { 
            font-size: 1.6rem; font-weight: 700; color: #fff; display: flex; align-items: center; gap: 12px; margin-bottom: 5px;
        }
        .cs-subtitle { font-size: 0.95rem; color: var(--primary); font-weight: 600; opacity: 0.9; }

        .dot-strong {
            width: 8px; height: 8px; border-radius: 50%;
            background: var(--primary); box-shadow: 0 0 12px var(--primary);
        }

        .cs-grid {
            display: grid; gap: 24px; margin: 30px 0;
            padding-left: 24px; border-left: 2px solid rgba(255,255,255,0.05);
        }
        .cs-item strong { color: var(--text); display: block; margin-bottom: 6px; font-size: 0.9rem; letter-spacing: 0.5px; }
        .cs-item p { color: var(--text-muted); font-size: 1rem; margin: 0; }
        
        /* TAGS */
        .tags { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 35px; }
        .tag { 
            font-size: 0.75rem; padding: 6px 12px; border-radius: 6px; font-weight: 600;
            border: 1px solid transparent; letter-spacing: 0.5px;
        }
        .tag.infra { background: var(--tag-infra-bg); color: var(--tag-infra-text); border-color: rgba(56, 189, 248, 0.2); }
        .tag.data { background: var(--tag-data-bg); color: var(--tag-data-text); border-color: rgba(0, 255, 157, 0.2); }
        .tag.backend { background: var(--tag-backend-bg); color: var(--tag-backend-text); border-color: rgba(251, 191, 36, 0.2); }
        .tag.iot { background: var(--tag-iot-bg); color: var(--tag-iot-text); border-color: rgba(168, 85, 247, 0.2); }

        /* METRIC BOX */
        .metric-col { display: flex; flex-direction: column; justify-content: center; gap: 20px; }
        .metric-box {
            background: rgba(0,0,0,0.2); padding: 30px; border-radius: 16px;
            text-align: center; border: 1px solid var(--border);
            display: flex; flex-direction: column; justify-content: center; height: 100%;
        }
        .metric-val { font-size: 3rem; font-weight: 800; color: var(--primary); line-height: 1; letter-spacing: -1px; }
        .metric-label { font-size: 0.9rem; color: var(--text-muted); margin-top: 8px; text-transform: uppercase; font-weight: 600; }
        .metric-sub { font-size: 0.85rem; color: var(--text-muted); margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px; }

        .btn-link { 
            display: inline-flex; align-items: center; gap: 6px; margin-top: 20px;
            color: var(--primary); text-decoration: none; font-weight: 600; font-size: 0.9rem;
        }
        .btn-link:hover { text-decoration: underline; }

        /* CONTACTO */
        .contact { text-align: center; padding: 100px 20px; border-top: 1px solid var(--border); background: linear-gradient(to bottom, var(--bg), #080c14); }
        .email-link { 
            font-size: clamp(1.5rem, 4vw, 2.5rem); color: var(--text); text-decoration: none; font-weight: 700;
            transition: 0.3s; display: inline-block; margin: 30px 0;
        }
        .email-link:hover { color: var(--primary); transform: scale(1.02); }

        /* CANVAS */
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; text-align: center; gap: 50px; }
            .hero { padding-top: 100px; }
            .hero-img-wrapper { order: -1; width: 240px; }
            .stack-row, .btn-group { justify-content: center; }
            .project-card { grid-template-columns: 1fr; gap: 30px; padding: 30px; }
            .cs-grid { border-left: none; padding-left: 0; gap: 20px; }
            .metric-box { min-height: 180px; }
        }
    </style>
</head>
<body>

    <div id="leaf-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999; transition:opacity 1s;">
        <canvas id="leaf-canvas"></canvas>
    </div>

    <nav aria-label="Navegaci√≥n principal">
        <div class="brand">EL MOSTAPHA <span>JAAIDI</span></div>
        <div class="nav-right">
            <div class="nav-items">
                <a href="#projects" data-key="nav_projects">Proyectos</a>
                <a href="#contact" data-key="nav_contact">Contacto</a>
            </div>
            <div class="lang-switch">
                <button class="lang-btn active" onclick="setLanguage('es')">ES</button>
                <button class="lang-btn" onclick="setLanguage('en')">EN</button>
            </div>
        </div>
    </nav>

    <canvas id="particles"></canvas>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <div class="live-dot"></div> <span data-key="hero_badge">Disponible para nuevos retos</span>
                </div>
                
                <h1>EL MOSTAPHA JAAIDI</h1>
                <div class="role-subtitle">
                    <span data-key="role">Senior Agro-Tech Engineer</span> & Data Systems Architect
                </div>
                
                <p data-key="hero_desc">
                    Transformo sensores en decisiones. Dise√±o sistemas IoT y pipelines de datos que 
                    <strong>anticipan plagas, optimizan microclimas y eliminan la intuici√≥n de la ecuaci√≥n</strong>.
                </p>

                <div class="stack-row">
                    <div class="stack-pill"><div class="stack-icon"></div> Python Expert</div>
                    <div class="stack-pill"><div class="stack-icon"></div> IoT Systems</div>
                    <div class="stack-pill"><div class="stack-icon"></div> Data Engineering</div>
                    <div class="stack-pill"><div class="stack-icon purple"></div> Agro-Data Intelligence</div>
                </div>

                <div class="btn-group">
                    <a href="#projects" class="btn btn-primary" aria-label="Ver casos de estudio" data-key="btn_projects">Ver Casos de Estudio</a>
                    <a href="https://github.com/jaaidi0" target="_blank" class="btn btn-ghost" aria-label="Ver perfil de GitHub de El Mostapha Jaaidi">GitHub</a>
                </div>
            </div>

            <div class="hero-img-wrapper">
                <div class="glow-bg"></div>
                <img src="img/foto.png" alt="Mostapha Jaaidi" class="hero-img" loading="eager" width="320" height="320" onerror="this.src='https://ui-avatars.com/api/?name=Mostapha+Jaidi&background=0f1623&color=00ff9d&size=400'">
            </div>
        </div>
    </section>

    <section id="projects" class="section">
        <div class="section-header">
            <h2 class="section-title" data-key="cs_title">Casos de Estudio</h2>
            <p class="section-subtitle" data-key="cs_subtitle">Ingenier√≠a aplicada a la resoluci√≥n de problemas agr√≠colas y clim√°ticos complejos.</p>
        </div>

        <article class="project-card">
            <div class="case-study">
                <div class="cs-header">
                    <div>
                        <h3 class="cs-title">AgroSentinel IoT <div class="dot-strong"></div></h3>
                        <div class="cs-subtitle" data-key="p1_sub">Monitorizaci√≥n microclim√°tica predictiva</div>
                    </div>
                </div>
                <div class="cs-grid">
                    <div class="cs-item">
                        <strong data-key="label_problem">‚ö†Ô∏è El Problema</strong>
                        <p data-key="p1_prob">P√©rdidas de cosecha por Botrytis debido a la falta de datos microclim√°ticos en tiempo real y decisiones basadas en intuici√≥n.</p>
                    </div>
                    <div class="cs-item">
                        <strong data-key="label_solution">üí° La Soluci√≥n</strong>
                        <p data-key="p1_sol">Ecosistema IoT completo: Sensores f√≠sicos + Docker + TimescaleDB + C√°lculo de VPD cada 60s.</p>
                    </div>
                    <div class="cs-item">
                        <strong data-key="label_impact">üìà Impacto</strong>
                        <p data-key="p1_imp"><strong>Reducci√≥n del 25% en riesgo f√∫ngico</strong> anticipado y arquitectura escalable a 50+ nodos.</p>
                    </div>
                </div>

                <div class="tags">
                    <span class="tag infra">Docker</span>
                    <span class="tag iot">MQTT</span>
                    <span class="tag backend">Python ETL</span>
                    <span class="tag data">TimescaleDB</span>
                </div>
            </div>
            
            <div class="metric-col">
                <div class="metric-box">
                    <div class="metric-val">24/7</div>
                    <div class="metric-label" data-key="p1_metric">Monitoreo Activo</div>
                    <div class="metric-sub" data-key="p1_metric_sub">Detecci√≥n predictiva de anomal√≠as en tiempo real.</div>
                    <a href="https://github.com/jaaidi0/AgroSentinel" target="_blank" class="btn-link" aria-label="Ver c√≥digo fuente de AgroSentinel" data-key="btn_code">Ver C√≥digo ‚Üí</a>
                </div>
            </div>
        </article>

        <article class="project-card">
            <div class="case-study">
                <div class="cs-header">
                    <div>
                        <h3 class="cs-title">AEMET Intelligence <div class="dot-strong"></div></h3>
                        <div class="cs-subtitle" data-key="p2_sub">Optimizaci√≥n de ingesta clim√°tica masiva</div>
                    </div>
                </div>
                <div class="cs-grid">
                    <div class="cs-item">
                        <strong data-key="label_problem">‚ö†Ô∏è El Problema</strong>
                        <p data-key="p2_prob">Latencias cr√≠ticas (+130s) en consultas secuenciales a APIs clim√°ticas hac√≠an inviable el an√°lisis operativo.</p>
                    </div>
                    <div class="cs-item">
                        <strong data-key="label_solution">üí° La Soluci√≥n</strong>
                        <p data-key="p2_sol">Implementaci√≥n de concurrencia as√≠ncrona (ThreadPool) y sistema de cach√© multinivel inteligente.</p>
                    </div>
                    <div class="cs-item">
                        <strong data-key="label_impact">üìà Impacto</strong>
                        <p data-key="p2_imp">Reducci√≥n de latencia a <strong>1.14s</strong> (99% de mejora) manteniendo una tasa de √©xito del 100%.</p>
                    </div>
                </div>

                <div class="tags">
                    <span class="tag backend">Python AsyncIO</span>
                    <span class="tag data">Streamlit</span>
                    <span class="tag data">Pandas</span>
                    <span class="tag backend">REST API</span>
                </div>
            </div>
            
            <div class="metric-col">
                <div class="metric-box">
                    <div class="metric-val">1.14s</div>
                    <div class="metric-label" data-key="p2_metric">Latencia Final</div>
                    <div class="metric-sub" data-key="p2_metric_sub">Optimizado desde 130s. Experiencia de usuario instant√°nea.</div>
                    <a href="https://github.com/jaaidi0/aemet-dashboard-pro" target="_blank" class="btn-link" aria-label="Ver c√≥digo fuente de AEMET Intelligence" data-key="btn_code">Ver C√≥digo ‚Üí</a>
                </div>
            </div>
        </article>
    </section>

    <section id="contact" class="contact">
        <h2 style="font-size: 2rem; color: #fff; margin-bottom: 10px;" data-key="contact_title">¬øHablamos de Datos?</h2>
        <p style="color: var(--text-muted);" data-key="contact_sub">Disponible para liderar proyectos de transformaci√≥n digital agr√≠cola.</p>
        
        <a href="mailto:eljaa@alum.us.es" class="email-link">eljaa@alum.us.es</a>
        
        <div style="margin-top: 30px; display: flex; gap: 30px; justify-content: center;">
            <a href="https://linkedin.com/in/el-jaidi" target="_blank" style="color: var(--text-muted); text-decoration: none; font-weight: 500;" aria-label="Perfil de LinkedIn">LinkedIn</a>
            <a href="https://github.com/jaaidi0" target="_blank" style="color: var(--text-muted); text-decoration: none; font-weight: 500;" aria-label="Perfil de GitHub">GitHub</a>
        </div>
        
        <p style="margin-top: 60px; font-size: 0.8rem; color: rgba(255,255,255,0.2);">
            &copy; 2025 El Mostapha Jaaidi. Engineered for Impact.
        </p>
    </section>

    <script>
        // 1. SISTEMA DE TRADUCCI√ìN
        const translations = {
            es: {
                nav_projects: "Proyectos", nav_contact: "Contacto",
                hero_badge: "Disponible para nuevos retos",
                role: "Senior Agro-Tech Engineer",
                hero_desc: "Transformo sensores en decisiones. Dise√±o sistemas IoT y pipelines de datos que <strong>anticipan plagas, optimizan microclimas y eliminan la intuici√≥n de la ecuaci√≥n</strong>.",
                btn_projects: "Ver Casos de Estudio",
                cs_title: "Casos de Estudio",
                cs_subtitle: "Ingenier√≠a aplicada a la resoluci√≥n de problemas agr√≠colas y clim√°ticos complejos.",
                label_problem: "‚ö†Ô∏è El Problema", label_solution: "üí° La Soluci√≥n", label_impact: "üìà Impacto",
                p1_sub: "Monitorizaci√≥n microclim√°tica predictiva",
                p1_prob: "P√©rdidas de cosecha por Botrytis debido a la falta de datos microclim√°ticos en tiempo real y decisiones basadas en intuici√≥n.",
                p1_sol: "Ecosistema IoT completo: Sensores f√≠sicos + Docker + TimescaleDB + C√°lculo de VPD cada 60s.",
                p1_imp: "<strong>Reducci√≥n del 25% en riesgo f√∫ngico</strong> anticipado y arquitectura escalable a 50+ nodos.",
                p1_metric: "Monitoreo Activo", p1_metric_sub: "Detecci√≥n predictiva de anomal√≠as en tiempo real.",
                p2_sub: "Optimizaci√≥n de ingesta clim√°tica masiva",
                p2_prob: "Latencias cr√≠ticas (+130s) en consultas secuenciales a APIs clim√°ticas hac√≠an inviable el an√°lisis operativo.",
                p2_sol: "Implementaci√≥n de concurrencia as√≠ncrona (ThreadPool) y sistema de cach√© multinivel inteligente.",
                p2_imp: "Reducci√≥n de latencia a <strong>1.14s</strong> (99% de mejora) manteniendo una tasa de √©xito del 100%.",
                p2_metric: "Latencia Final", p2_metric_sub: "Optimizado desde 130s. Experiencia de usuario instant√°nea.",
                btn_code: "Ver C√≥digo ‚Üí",
                contact_title: "¬øHablamos de Datos?", contact_sub: "Disponible para liderar proyectos de transformaci√≥n digital agr√≠cola."
            },
            en: {
                nav_projects: "Projects", nav_contact: "Contact",
                hero_badge: "Available for new challenges",
                role: "Senior Agro-Tech Engineer",
                hero_desc: "Turning sensors into decisions. I design IoT systems and data pipelines that <strong>predict pests, optimize microclimates, and remove guesswork from the equation</strong>.",
                btn_projects: "View Case Studies",
                cs_title: "Case Studies",
                cs_subtitle: "Engineering applied to solving complex agricultural and climatic problems.",
                label_problem: "‚ö†Ô∏è The Challenge", label_solution: "üí° The Solution", label_impact: "üìà The Impact",
                p1_sub: "Predictive microclimate monitoring",
                p1_prob: "Crop losses due to Botrytis caused by lack of real-time microclimate data and intuition-based decisions.",
                p1_sol: "Complete IoT ecosystem: Physical sensors + Docker + TimescaleDB + VPD Calculation every 60s.",
                p1_imp: "<strong>25% reduction in fungal risk</strong> and scalable architecture to 50+ nodes.",
                p1_metric: "Active Monitoring", p1_metric_sub: "Real-time predictive anomaly detection.",
                p2_sub: "Massive climate data ingestion optimization",
                p2_prob: "Critical latencies (+130s) in sequential API queries made operational analysis unviable.",
                p2_sol: "Implementation of asynchronous concurrency (ThreadPool) and smart multi-level caching system.",
                p2_imp: "Latency reduced to <strong>1.14s</strong> (99% improvement) maintaining 100% success rate.",
                p2_metric: "Final Latency", p2_metric_sub: "Optimized from 130s. Instant user experience.",
                btn_code: "View Code ‚Üí",
                contact_title: "Let's Talk Data?", contact_sub: "Available to lead digital agricultural transformation projects."
            }
        };

        function setLanguage(lang) {
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[lang][key]) el.innerHTML = translations[lang][key];
            });
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.lang-btn[onclick="setLanguage('${lang}')"]`).classList.add('active');
            localStorage.setItem('lang', lang);
        }
        setLanguage(localStorage.getItem('lang') || 'es');

        /* 2. NAVBAR SCROLL EFFECT */
        window.addEventListener("scroll", () => {
            const nav = document.querySelector("nav");
            if (window.scrollY > 10) nav.classList.add("scrolled"); else nav.classList.remove("scrolled");
        });

        /* 3. PARTICLES ENGINE (Version PRO - Optimized) */
        const canvas = document.getElementById("particles");
        const ctx = canvas.getContext("2d");
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;
        const PARTICLE_COUNT = 55; const MAX_SPEED = 0.25; const CONNECT_DISTANCE = 130;
        const particles = [];

        class Particle {
            constructor() {
                this.x = Math.random() * w; this.y = Math.random() * h;
                this.vx = (Math.random() - 0.5) * MAX_SPEED; this.vy = (Math.random() - 0.5) * MAX_SPEED;
                this.size = 2;
            }
            move() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > w) this.vx *= -1;
                if (this.y < 0 || this.y > h) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = "rgba(0,255,157,0.7)";
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }

        function initParticles() { particles.length = 0; for (let i = 0; i < PARTICLE_COUNT; i++) particles.push(new Particle()); }

        function connectParticles() {
            ctx.strokeStyle = "rgba(0,255,157,0.07)"; ctx.lineWidth = 1;
            for (let i = 0; i < PARTICLE_COUNT; i++) {
                for (let j = i + 1; j < PARTICLE_COUNT; j++) {
                    const dx = particles[i].x - particles[j].x; const dy = particles[i].y - particles[j].y;
                    if ((dx * dx + dy * dy) < CONNECT_DISTANCE * CONNECT_DISTANCE) {
                        ctx.beginPath(); ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, w, h);
            particles.forEach(p => { p.move(); p.draw(); });
            connectParticles(); requestAnimationFrame(animate);
        }

        window.addEventListener("resize", () => { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; initParticles(); });
        initParticles(); animate();

        /* 4. LEAF INTRO ANIMATION */
        (function() {
            const lCanvas = document.getElementById('leaf-canvas');
            const lCtx = lCanvas.getContext('2d');
            const overlay = document.getElementById('leaf-overlay');
            let lw, lh, leaves = [], startTime = Date.now();
            const DURATION = 3500; 

            function resizeL() { lw = lCanvas.width = window.innerWidth; lh = lCanvas.height = window.innerHeight; }
            window.addEventListener('resize', resizeL); resizeL();

            class Leaf {
                constructor() {
                    this.x = Math.random() * lw; this.y = Math.random() * -lh;
                    this.vy = Math.random() * 2 + 1; this.vx = Math.random() * 2 - 1;
                    this.size = Math.random() * 3 + 2; this.angle = Math.random() * Math.PI * 2;
                    this.spin = Math.random() * 0.05 - 0.025;
                    this.color = Math.random() > 0.5 ? '#00ff9d' : '#38bdf8';
                }
                update() {
                    this.y += this.vy; this.x += Math.sin(this.y * 0.01) + this.vx * 0.5;
                    this.angle += this.spin;
                }
                draw() {
                    lCtx.save(); lCtx.translate(this.x, this.y); lCtx.rotate(this.angle);
                    lCtx.fillStyle = this.color; lCtx.globalAlpha = 0.8;
                    lCtx.beginPath(); lCtx.moveTo(0, -this.size); lCtx.lineTo(this.size/2, 0);
                    lCtx.lineTo(0, this.size); lCtx.lineTo(-this.size/2, 0); lCtx.closePath();
                    lCtx.fill(); lCtx.restore();
                }
            }
            for(let i=0; i<100; i++) leaves.push(new Leaf());

            function animateLeaves() {
                lCtx.clearRect(0, 0, lw, lh);
                leaves.forEach(leaf => { if (leaf.y < lh + 20) { leaf.update(); leaf.draw(); } });
                if (Date.now() - startTime > DURATION - 1000) overlay.style.opacity = '0';
                if (Date.now() - startTime < DURATION) requestAnimationFrame(animateLeaves);
                else overlay.remove();
            }
            animateLeaves();
        })();
    </script>
</body>
</html>